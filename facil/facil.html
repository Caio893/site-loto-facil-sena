<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Comparar LOTO-FÁCIL 15 números</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="shortcut icon" href="../caixa.png">
</head>
<body>

    <h1>Comparar LOTO-FÁCIL - 15 números</h1>

    <label>Valor Geral (15 números separados por espaço):</label><br>
    <input type="text" id="valorGeral" placeholder="Ex: 01 02 03 ... 15" maxlength="44" inputmode="numeric" pattern="[0-9\s]*" oninput="formatarNumeros(this)"><br>

    <label>Quantos jogos deseja comparar?</label><br>
    <input type="number" id="quantidadeJogos" min="1"><br>

    <button onclick="gerarCamposJogos()">Gerar Campos de Jogos</button>

    <div id="jogosContainer"></div>

    <button onclick="compararJogos()">Comparar Jogos</button>

    <div id="resultados"></div>

    <script>
        function formatarNumeros(input) {
            // Permite números e espaços
            let texto = input.value.replace(/[^\d\s]/g, '');
            input.value = texto;
        }

        function gerarCamposJogos() {
            const container = document.getElementById('jogosContainer');
            container.innerHTML = '';
            const quantidade = parseInt(document.getElementById('quantidadeJogos').value);

            if (isNaN(quantidade) || quantidade < 1) {
                alert('Digite uma quantidade válida de jogos.');
                return;
            }

            for (let i = 1; i <= quantidade; i++) {
                const div = document.createElement('div');
                div.className = 'jogo';
                div.innerHTML = `
                    <label>Jogo ${i} (15 números separados por espaço):</label><br>
                    <input type="text" class="jogoInput" placeholder="Ex: 01 02 03 ... 15" maxlength="44" inputmode="numeric" pattern="[0-9\s]*" oninput="formatarNumeros(this)"><br>
                `;
                container.appendChild(div);
            }
        }

        function validarNumeros(numeros, quantidadeEsperada) {
            if (numeros.length !== quantidadeEsperada) return false;
            if (numeros.some(num => isNaN(num) || num < 1 || num > 60)) return false;
            const setNumeros = new Set(numeros);
            if (setNumeros.size !== numeros.length) return false;
            return true;
        }

        function compararJogos() {
            const valorGeralInput = document.getElementById('valorGeral').value.trim();
            const valorGeral = valorGeralInput.split(/\s+/).map(Number);

            if (!validarNumeros(valorGeral, 15)) {
                alert('O valor geral deve conter exatamente 15 números válidos entre 1 e 60, sem repetir.');
                return;
            }

            const jogosInputs = document.querySelectorAll('.jogoInput');
            const jogos = [];

            for (let input of jogosInputs) {
                const numeros = input.value.trim().split(/\s+/).map(Number);
                if (!validarNumeros(numeros, 15)) {
                    alert('Cada jogo deve conter exatamente 15 números válidos entre 1 e 60, sem repetir.');
                    return;
                }
                jogos.push(numeros);
            }

            const resultados = [];

            jogos.forEach((jogo, index) => {
                let acertos = jogo.filter(numero => valorGeral.includes(numero)).length;
                resultados.push(`Jogo ${index + 1}: ${acertos} acertos`);
            });

            document.getElementById('resultados').innerHTML = `
                <h2>Resultados:</h2>
                <ul>${resultados.map(r => `<li>${r}</li>`).join('')}</ul>
            `;
        }
    </script>

</body>
</html>
